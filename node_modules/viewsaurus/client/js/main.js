var Viewsaurus = require('./Viewsaurus');
var GoogleAnalytics = require('./GoogleAnalytics');
var dpwMenu = require('./dpwMenu');

$(function () {

    new dpwMenu().render();

    // create GA client
    window.GAClient = new GoogleAnalytics("UA-57519112-3");
    var totalSteps = $('.saurus-prose .step').length;

    GAClient.trackPage(location.href, 0, 0, totalSteps);
    // create global viewsaurus object
    window.viewsaurus = new Viewsaurus();

    var $prose = $(".saurus-prose");
    var minHeight = $prose.height();
    var minWidth = $prose.width();
    $prose.resizable({
        resize: function () {
            $(".saurus-code").css('left', $prose.width());
        },
        minHeight: minHeight,
        minWidth: minWidth
    });

    $(window).resize(function (event) {
        if (event.target === window) {
            $prose.resizable("option", "minHeight", $prose.height());
        }
    });
});
